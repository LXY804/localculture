@echo off
chcp 65001 >nul
echo ========================================
echo    æœ¬åœ°æ–‡åŒ–å¹³å°å¯åŠ¨è„šæœ¬
echo ========================================
echo.

echo [1/3] æ£€æŸ¥Node.jsçŽ¯å¢ƒ...
node --version >nul 2>&1
if errorlevel 1 (
    echo âŒ é”™è¯¯: æœªæ‰¾åˆ°Node.jsï¼Œè¯·å…ˆå®‰è£…Node.js
    pause
    exit /b 1
)
echo âœ… Node.jsçŽ¯å¢ƒæ­£å¸¸

echo.
echo [2/3] å¯åŠ¨åŽç«¯æœåŠ¡å™¨...
start "æœ¬åœ°æ–‡åŒ–å¹³å°-åŽç«¯æœåŠ¡å™¨" cmd /k "cd /d %~dp0server && echo å¯åŠ¨åŽç«¯æœåŠ¡å™¨... && node index.js"
echo âœ… åŽç«¯æœåŠ¡å™¨å¯åŠ¨ä¸­...

echo.
echo [3/3] ç­‰å¾…åŽç«¯æœåŠ¡å™¨å¯åŠ¨å®Œæˆ...
timeout /t 5 /nobreak >nul

echo å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨...
start "æœ¬åœ°æ–‡åŒ–å¹³å°-å‰ç«¯æœåŠ¡å™¨" cmd /k "cd /d %~dp0 && echo å¯åŠ¨å‰ç«¯æœåŠ¡å™¨... && npm run serve"
echo âœ… å‰ç«¯æœåŠ¡å™¨å¯åŠ¨ä¸­...

echo.
echo ========================================
echo    å¯åŠ¨å®Œæˆï¼
echo ========================================
echo.
echo ðŸŒ å‰ç«¯åœ°å€: http://localhost:8080
echo ðŸ”§ åŽç«¯åœ°å€: http://localhost:3001
echo.
echo ðŸ’¡ æç¤º: 
echo    - å…³é—­æ­¤çª—å£ä¸ä¼šåœæ­¢æœåŠ¡å™¨
echo    - è¦åœæ­¢æœåŠ¡å™¨ï¼Œè¯·å…³é—­å¯¹åº”çš„å‘½ä»¤è¡Œçª—å£æˆ–è¿è¡Œ stop.bat
echo    - å¦‚æžœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
echo.
echo æŒ‰ä»»æ„é”®å…³é—­æ­¤çª—å£...
pause >nul
