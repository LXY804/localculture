欢迎加入本地文化平台项目！本指南将帮助你在15分钟内完成环境配置并运行项目。

请确保你的电脑已安装以下软件：

- ✅ **Node.js** (v14.0+ 推荐 v16+) - [下载地址](https://nodejs.org/)
- ✅ **MySQL** (v5.7+ 或 v8.0+) - [下载地址](https://dev.mysql.com/downloads/mysql/)
- ✅ **Git** - [下载地址](https://git-scm.com/)

📋 快速启动步骤

第一步：获取代码
```bash
# 克隆项目（如果还没有）
git clone <项目地址>
cd localculture/vue2-app
```


第二步：运行初始化脚本
在本地文件夹内`vue2-app` 目录下，双击运行：
```
setup-for-new-member.bat
```

这个脚本会自动：
- ✅ 检查 Node.js 环境
- ✅ 安装项目依赖 (npm install)
- ✅ 检查/创建 .env 配置文件
- ✅ 创建必要的目录
- ✅ 复制图片资源


第三步：配置数据库密码
1. 在 `vue2-app` 目录下寻找 `.env` 文件
2. 写如修改以下内容：

```env
# 数据库配置（改成你自己的MySQL密码）
DB_HOST=localhost（名字这里也可能需要改）
DB_USER=root
DB_PASSWORD=你的MySQL密码
DB_NAME=localculture
DB_PORT=3306

# 服务器配置
PORT=3001

# JWT配置（保持默认即可）
JWT_SECRET=localculture_secret_2025
```
⚠️ **重要**：`DB_PASSWORD` 改成你自己的 MySQL root 密码！


第四步：创建并导入数据库
（这部分建议手动导入：
在命令行输入：

（建立数据库：记得填充自己的密码）
mysql -u root -p密码 -e "CREATE DATABASE IF NOT EXISTS localculture DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;" 

（在命令行进入数据库）
mysql -u root -p密码 localculture

（复制全部schema.sql粘贴进mysql命令行）
（复制全部data.sql粘贴进mysql命令行）
（复制全部fix-article-data.sql粘贴进mysql命令行）
并检查是否有error

或者自动导入（有风险）
4.1 创建数据库
打开 **MySQL 命令行** 或 **MySQL Workbench**，执行：

```sql
CREATE DATABASE IF NOT EXISTS localculture CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

#### 4.2 导入数据
在 `vue2-app` 目录下，打开 **PowerShell**，执行以下三条命令：
```powershell
# 1. 导入表结构
Get-Content sql\schema.sql | mysql -u root -p localculture
# 2. 导入基础数据（会提示输入密码，输入你的MySQL密码）
Get-Content sql\data.sql | mysql -u root -p localculture
# 3. 修复文章数据
Get-Content sql\fix-articles-data.sql | mysql -u root -p localculture
```

每条命令都会要求输入 MySQL 密码，输入后回车即可。

第五步：启动项目
在本地文件夹`vue2-app` 目录下，双击运行：
```
start.bat
```

这会自动启动：
- 🔧 **后端服务器** (http://localhost:3001)
- 🌐 **前端服务器** (http://localhost:8080)

✅ 看到两个命令行窗口弹出，显示服务器启动成功即可！

🎉 开始使用



❓ 常见问题

### 1. 数据库连接失败？

**症状**：启动后端时显示 `❌ 数据库连接失败`

**解决**：
1. 检查 MySQL 是否正在运行
2. 检查 `.env` 文件中的 `DB_PASSWORD` 是否正确
3. 确认数据库 `localculture` 已创建

---

### 2. 端口被占用？

**症状**：提示端口 3001 或 8080 已被占用

**解决**：
```powershell
# 查找占用端口的进程
netstat -ano | findstr :3001
netstat -ano | findstr :8080

# 结束进程（替换<PID>为实际进程ID）
taskkill /PID <PID> /F
```


### 3. 论坛页面是空的？

**症状**：论坛列表没有帖子

**解决**：确保数据导入时执行了 `data.sql`，并且数据库中 `forum_posts` 表有数据且 `visible=1`

```sql
-- 验证论坛数据
SELECT id, title, visible FROM forum_posts;

-- 如果visible是0，更新为1
UPDATE forum_posts SET visible = 1 WHERE visible = 0;
```

---

### 4. 个人中心点击论坛记录显示"帖子不存在"？

**症状**：点击个人中心的论坛点赞/收藏记录，跳转后显示"帖子不存在"

**解决**：已修复，确保你运行的是最新的代码。如果仍然有问题，检查数据库中 `forum_posts` 的 `status` 是否为 `published`。

---

### 5. 热度排序不对？

**症状**：论坛或文章"最热"排序结果不符合预期

**说明**：热度算法已优化为：
```
热度 = 浏览量×0.5 + 点赞数×3 + 收藏数×5 + 评论数×4
```

权重：收藏 > 评论 > 点赞 > 浏览

---

## 🛑 停止服务

关闭两个命令行窗口，或者运行：

```
stop.bat
```

---


## 💬 需要帮助？

如果遇到问题：
1. 检查上面的"常见问题"部分
2. 查看详细文档
3. 联系项目负责人

---

**祝你使用愉快！🎉**

